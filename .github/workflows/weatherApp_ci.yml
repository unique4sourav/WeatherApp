name: iOS CI/CD

on:
  push: [main]
  pull_request: [main]

  jobs:
    build:
      runs-on: macos-latest

      steps:
      -name: Checkout code
      uses: actions/checkout@v3

      -name: Setup Ruby
      uses: ruby/setup-ruby@v1
        with:
          ruby-version: 3.2

      -name: Install dependencies
      run: |
        gem install bundler
        bundle install

      -name: Build app
      run: |
        xcodebuild clean build \
        -workspace WeatherApp.xcworkspace \
        -scheme WeatherApp \
        - sdk iphones \
        - configuration Release \
        CODE_SIGN_IDENTITY="" CODE_SIGN_REQUIRED=NO
